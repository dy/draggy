{
  "version": 3,
  "sources": ["node_modules/mucss/rect.js", "node_modules/mucss/has-scroll.js", "node_modules/mucss/scrollbar.js", "node_modules/mucss/is-fixed.js", "node_modules/mucss/fake-element.js", "node_modules/mucss/prefix.js", "node_modules/mucss/css.js", "node_modules/mucss/parse-value.js", "node_modules/mucss/translate.js", "node_modules/mucss/offset.js", "node_modules/icicle/index.js", "node_modules/emmy/listeners.js", "node_modules/emmy/off.js", "node_modules/emmy/on.js", "node_modules/emmy/emit.js", "node_modules/emmy/index.js", "node_modules/get-client-xy/index.js", "node_modules/is-primitive/index.js", "node_modules/define-state/node_modules/st8/index.js", "node_modules/define-state/index.js", "index.js"],
  "sourcesContent": ["/**\r\n * Simple rect constructor.\r\n * It is just faster and smaller than constructing an object.\r\n *\r\n * @module mucss/rect\r\n *\r\n * @param {number} l left\r\n * @param {number} t top\r\n * @param {number} r right\r\n * @param {number} b bottom\r\n *\r\n * @return {Rect} A rectangle object\r\n */\r\nmodule.exports = function Rect (l,t,r,b) {\r\n\tif (!(this instanceof Rect)) return new Rect(l,t,r,b);\r\n\r\n\tthis.left=l||0;\r\n\tthis.top=t||0;\r\n\tthis.right=r||0;\r\n\tthis.bottom=b||0;\r\n\tthis.width=Math.abs(this.right - this.left);\r\n\tthis.height=Math.abs(this.bottom - this.top);\r\n};", "/**\r\n * Window scrollbar detector.\r\n *\r\n * @module mucss/has-scroll\r\n */\r\n\r\n//TODO: detect any element scroll, not only the window\r\nexports.x = function () {\r\n\treturn window.innerHeight > document.documentElement.clientHeight;\r\n};\r\nexports.y = function () {\r\n\treturn window.innerWidth > document.documentElement.clientWidth;\r\n};", "/**\r\n * Calculate scrollbar width.\r\n *\r\n * @module mucss/scrollbar\r\n */\r\n\r\n// Create the measurement node\r\nvar scrollDiv = document.createElement(\"div\");\r\n\r\nvar style = scrollDiv.style;\r\n\r\nstyle.width = '100px';\r\nstyle.height = '100px';\r\nstyle.overflow = 'scroll';\r\nstyle.position = 'absolute';\r\nstyle.top = '-9999px';\r\n\r\ndocument.documentElement.appendChild(scrollDiv);\r\n\r\n// the scrollbar width\r\nmodule.exports = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n\r\n// Delete fake DIV\r\ndocument.documentElement.removeChild(scrollDiv);", "/**\r\n * Detect whether element is placed to fixed container or is fixed itself.\r\n *\r\n * @module mucss/is-fixed\r\n *\r\n * @param {(Element|Object)} el Element to detect fixedness.\r\n *\r\n * @return {boolean} Whether element is nested.\r\n */\r\nmodule.exports = function (el) {\r\n\tvar parentEl = el;\r\n\r\n\t//window is fixed, btw\r\n\tif (el === window) return true;\r\n\r\n\t//unlike the doc\r\n\tif (el === document) return false;\r\n\r\n\twhile (parentEl) {\r\n\t\tif (getComputedStyle(parentEl).position === 'fixed') return true;\r\n\t\tparentEl = parentEl.offsetParent;\r\n\t}\r\n\treturn false;\r\n};", "/** Just a fake element to test styles\r\n * @module mucss/fake-element\r\n */\r\n\r\nmodule.exports = document.createElement('div');", "/**\r\n * Vendor prefixes\r\n * Method of http://davidwalsh.name/vendor-prefix\r\n * @module mucss/prefix\r\n */\r\n\r\nvar styles = getComputedStyle(document.documentElement, '');\r\n\r\nif (!styles) {\r\n\tmodule.exports = {\r\n\t\tdom: '', lowercase: '', css: '', js: ''\r\n\t};\r\n}\r\n\r\nelse {\r\n\tvar pre = (Array.prototype.slice.call(styles)\r\n\t\t.join('')\r\n\t\t.match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o'])\r\n\t)[1];\r\n\r\n\tvar dom = ('WebKit|Moz|MS|O').match(new RegExp('(' + pre + ')', 'i'))[1];\r\n\r\n\tmodule.exports = {\r\n\t\tdom: dom,\r\n\t\tlowercase: pre,\r\n\t\tcss: '-' + pre + '-',\r\n\t\tjs: pre[0].toUpperCase() + pre.substr(1)\r\n\t};\r\n}\r\n", "/**\r\n * Get or set element\u2019s style, prefix-agnostic.\r\n *\r\n * @module  mucss/css\r\n */\r\nvar fakeStyle = require('./fake-element').style;\r\nvar prefix = require('./prefix').lowercase;\r\n\r\n\r\n/**\r\n * Apply styles to an element.\r\n *\r\n * @param    {Element}   el   An element to apply styles.\r\n * @param    {Object|string}   obj   Set of style rules or string to get style rule.\r\n */\r\nmodule.exports = function(el, obj){\r\n\tif (!el || !obj) return;\r\n\r\n\tvar name, value;\r\n\r\n\t//return value, if string passed\r\n\tif (typeof obj === 'string') {\r\n\t\tname = obj;\r\n\r\n\t\t//return value, if no value passed\r\n\t\tif (arguments.length < 3) {\r\n\t\t\treturn el.style[prefixize(name)];\r\n\t\t}\r\n\r\n\t\t//set style, if value passed\r\n\t\tvalue = arguments[2] || '';\r\n\t\tobj = {};\r\n\t\tobj[name] = value;\r\n\t}\r\n\r\n\tfor (name in obj){\r\n\t\t//convert numbers to px\r\n\t\tif (typeof obj[name] === 'number' && /left|right|bottom|top|width|height/i.test(name)) obj[name] += 'px';\r\n\r\n\t\tvalue = obj[name] || '';\r\n\r\n\t\tel.style[prefixize(name)] = value;\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * Return prefixized prop name, if needed.\r\n *\r\n * @param    {string}   name   A property name.\r\n * @return   {string}   Prefixed property name.\r\n */\r\nfunction prefixize(name){\r\n\tvar uName = name[0].toUpperCase() + name.slice(1);\r\n\tif (fakeStyle[name] !== undefined) return name;\r\n\tif (fakeStyle[prefix + uName] !== undefined) return prefix + uName;\r\n\treturn '';\r\n}\r\n", "/**\r\n * Returns parsed css value.\r\n *\r\n * @module mucss/parse-value\r\n *\r\n * @param {string} str A string containing css units value\r\n *\r\n * @return {number} Parsed number value\r\n */\r\nmodule.exports = function (str){\r\n\tstr += '';\r\n\treturn parseFloat(str.slice(0,-2)) || 0;\r\n};\r\n\r\n//FIXME: add parsing units", "/**\r\n * Parse translate3d\r\n *\r\n * @module mucss/translate\r\n */\r\n\r\nvar css = require('./css');\r\nvar parseValue = require('./parse-value');\r\n\r\nmodule.exports = function (el) {\r\n\tvar translateStr = css(el, 'transform');\r\n\r\n\t//find translate token, retrieve comma-enclosed values\r\n\t//translate3d(1px, 2px, 2) \u2192 1px, 2px, 2\r\n\t//FIXME: handle nested calcs\r\n\tvar match = /translate(?:3d)?\\s*\\(([^\\)]*)\\)/.exec(translateStr);\r\n\r\n\tif (!match) return [0, 0];\r\n\tvar values = match[1].split(/\\s*,\\s*/);\r\n\r\n\t//parse values\r\n\t//FIXME: nested values are not necessarily pixels\r\n\treturn values.map(function (value) {\r\n\t\treturn parseValue(value);\r\n\t});\r\n};", "/**\r\n * Calculate absolute offsets of an element, relative to the document.\r\n *\r\n * @module mucss/offsets\r\n *\r\n */\r\nvar win = window;\r\nvar doc = document;\r\nvar Rect = require('./rect');\r\nvar hasScroll = require('./has-scroll');\r\nvar scrollbar = require('./scrollbar');\r\nvar isFixedEl = require('./is-fixed');\r\nvar getTranslate = require('./translate');\r\n\r\n\r\n/**\r\n * Return absolute offsets of any target passed\r\n *\r\n * @param    {Element|window}   el   A target. Pass window to calculate viewport offsets\r\n * @return   {Object}   Offsets object with trbl.\r\n */\r\nmodule.exports = offsets;\r\n\r\nfunction offsets(el) {\r\n\tif (!el) throw Error('Bad argument');\r\n\r\n\t//calc client rect\r\n\tvar cRect, result;\r\n\r\n\t//return vp offsets\r\n\tif (el === win) {\r\n\t\tresult = Rect(\r\n\t\t\twin.pageXOffset,\r\n\t\t\twin.pageYOffset\r\n\t\t);\r\n\r\n\t\tresult.width = win.innerWidth - (hasScroll.y() ? scrollbar : 0),\r\n\t\t\tresult.height = win.innerHeight - (hasScroll.x() ? scrollbar : 0)\r\n\t\tresult.right = result.left + result.width;\r\n\t\tresult.bottom = result.top + result.height;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t//return absolute offsets if document requested\r\n\telse if (el === doc) {\r\n\t\tvar res = offsets(doc.documentElement);\r\n\t\tres.bottom = Math.max(window.innerHeight, res.bottom);\r\n\t\tres.right = Math.max(window.innerWidth, res.right);\r\n\t\tres.height = Math.max(window.innerHeight, res.height);\r\n\t\tres.width = Math.max(window.innerHeight, res.width);\r\n\t\tif (hasScroll.y(doc.documentElement)) res.right -= scrollbar;\r\n\t\tif (hasScroll.x(doc.documentElement)) res.bottom -= scrollbar;\r\n\t\treturn res;\r\n\t}\r\n\r\n\t//FIXME: why not every element has getBoundingClientRect method?\r\n\ttry {\r\n\t\tcRect = el.getBoundingClientRect();\r\n\t} catch (e) {\r\n\t\tcRect = Rect(\r\n\t\t\tel.clientLeft,\r\n\t\t\tel.clientTop\r\n\t\t);\r\n\t}\r\n\r\n\t//whether element is or is in fixed\r\n\tvar isFixed = isFixedEl(el);\r\n\tvar xOffset = isFixed ? 0 : win.pageXOffset;\r\n\tvar yOffset = isFixed ? 0 : win.pageYOffset;\r\n\r\n\tresult = Rect(\r\n\t\tcRect.left + xOffset,\r\n\t\tcRect.top + yOffset,\r\n\t\tcRect.left + xOffset + el.offsetWidth,\r\n\t\tcRect.top + yOffset + el.offsetHeight\r\n\t);\r\n\r\n\treturn result;\r\n};\r\n", "/**\r\n * @module Icicle\r\n */\r\nmodule.exports = {\r\n\tfreeze: lock,\r\n\tunfreeze: unlock,\r\n\tisFrozen: isLocked\r\n};\r\n\r\n\r\n/** Set of targets  */\r\nvar lockCache = new WeakMap;\r\n\r\n\r\n/**\r\n * Set flag on target with the name passed\r\n *\r\n * @return {bool} Whether lock succeeded\r\n */\r\nfunction lock(target, name){\r\n\tvar locks = lockCache.get(target);\r\n\tif (locks && locks[name]) return false;\r\n\r\n\t//create lock set for a target, if none\r\n\tif (!locks) {\r\n\t\tlocks = {};\r\n\t\tlockCache.set(target, locks);\r\n\t}\r\n\r\n\t//set a new lock\r\n\tlocks[name] = true;\r\n\r\n\t//return success\r\n\treturn true;\r\n}\r\n\r\n\r\n/**\r\n * Unset flag on the target with the name passed.\r\n *\r\n * Note that if to return new value from the lock/unlock,\r\n * then unlock will always return false and lock will always return true,\r\n * which is useless for the user, though maybe intuitive.\r\n *\r\n * @param {*} target Any object\r\n * @param {string} name A flag name\r\n *\r\n * @return {bool} Whether unlock failed.\r\n */\r\nfunction unlock(target, name){\r\n\tvar locks = lockCache.get(target);\r\n\tif (!locks || !locks[name]) return false;\r\n\r\n\tlocks[name] = null;\r\n\r\n\treturn true;\r\n}\r\n\r\n\r\n/**\r\n * Return whether flag is set\r\n *\r\n * @param {*} target Any object to associate lock with\r\n * @param {string} name A flag name\r\n *\r\n * @return {Boolean} Whether locked or not\r\n */\r\nfunction isLocked(target, name){\r\n\tvar locks = lockCache.get(target);\r\n\treturn (locks && locks[name]);\r\n}", "/**\n * A storage for per-target callbacks.\n * WeakMap is the most safe solution.\n *\n * @module emmy/listeners\n */\n\n// target: {evt: callbacks}\nvar LISTENERS = new WeakMap()\n\n/**\n * Get listeners for the target/evt (optionally).\n *\n * @param {object} target a target object\n * @param {string}? evt an evt name, if undefined - return object with events\n *\n * @return {(object|array)} List/set of listeners\n */\nfunction get(target, evt, tags) {\n\tvar cbs = LISTENERS.get(target);\n\tvar result;\n\n\tif (!evt) {\n\t\tresult = cbs || {};\n\n\t\t// filter cbs by tags\n\t\tif (tags && tags.length) {\n\t\t\tvar filteredResult = {};\n\t\t\tfor (var evt in result) {\n\t\t\t\tfilteredResult[evt] = result[evt].filter(function (cb) {\n\t\t\t\t\treturn hasTags(cb, tags);\n\t\t\t\t});\n\t\t\t}\n\t\t\tresult = filteredResult;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tif (!cbs || !cbs[evt]) {\n\t\treturn [];\n\t}\n\n\tresult = cbs[evt];\n\n\t// if there are evt namespaces specified - filter callbacks\n\tif (tags && tags.length) {\n\t\tresult = result.filter(function (cb) {\n\t\t\treturn hasTags(cb, tags);\n\t\t});\n\t}\n\n\treturn result;\n}\n\n\n/**\n * Remove listener, if any\n */\nfunction remove(target, evt, cb, tags) {\n\t// get callbacks for the evt\n\tvar evtCallbacks = LISTENERS.get(target);\n\tif (!evtCallbacks || !evtCallbacks[evt]) return false;\n\n\tvar callbacks = evtCallbacks[evt];\n\n\t// if tags are passed - make sure callback has some tags before removing\n\tif (tags && tags.length && !hasTags(cb, tags)) return false;\n\n\t// remove specific handler\n\tfor (var i = 0; i < callbacks.length; i++) {\n\t\t// once method has original callback in .cb\n\t\tif (callbacks[i] === cb) {\n\t\t\tcallbacks.splice(i, 1);\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\n\n/**\n * Add a new listener\n */\nfunction add(target, evt, cb, tags) {\n\tif (!cb) return;\n\n\tvar targetCallbacks = LISTENERS.get(target);\n\n\t// ensure set of callbacks for the target exists\n\tif (!targetCallbacks) {\n\t\ttargetCallbacks = {}\n\t\tLISTENERS.set(target, targetCallbacks)\n\t}\n\n\t// save a new callback\n\t(targetCallbacks[evt] = targetCallbacks[evt] || []).push(cb);\n\n\t// save ns for a callback, if any\n\tif (tags && tags.length) {\n\t\tcb._ns = tags;\n\t}\n};\n\n\n/** Detect whether an cb has at least one tag from the list */\nfunction hasTags(cb, tags) {\n\tif (!cb._ns) return false\n\n\t// if cb is tagged with a ns and includes one of the ns passed - keep it\n\tfor (var i = tags.length; i--;) {\n\t\tif (cb._ns.indexOf(tags[i]) >= 0) return true;\n\t}\n}\n\n\nmodule.exports = {\n\tget: get, remove: remove, add: add\n};\n", "/**\n * @module emmy/off\n */\n'use strict'\n\nmodule.exports = off;\n\nvar icicle = require('icicle');\nvar listeners = require('./listeners');\n\n/**\n * Remove listener[s] from the target\n *\n * @param {[type]} evt [description]\n * @param {Function} fn [description]\n *\n * @return {[type]} [description]\n */\nfunction off(target, evt, fn) {\n\tif (!target) return target;\n\n\tvar callbacks, i;\n\n\t// unbind all listeners if no fn specified\n\tif (fn === undefined) {\n\t\tvar args = [].slice.call(arguments, 1);\n\n\t\t// try to use target removeAll method, if any\n\t\tvar allOff = target.removeAll || target.removeAllListeners;\n\n\t\t// call target removeAll\n\t\tif (allOff) {\n\t\t\tallOff.apply(target, args);\n\t\t}\n\n\t\t// then forget own callbacks, if any\n\n\t\t// unbind all evts\n\t\tif (!evt) {\n\t\t\tcallbacks = listeners.get(target);\n\t\t\tfor (evt in callbacks) {\n\t\t\t\toff(target, evt);\n\t\t\t}\n\t\t\treturn target\n\t\t}\n\n\t\t// unbind passed callback from all listeners\n\t\tif (typeof evt === 'function') {\n\t\t\tfn = evt\n\t\t\tevt = null\n\t\t\tcallbacks = listeners.get(target);\n\t\t\tfor (evt in callbacks) {\n\t\t\t\tif (callbacks[evt].indexOf(fn) >= 0) {\n\t\t\t\t\toff(target, evt, fn)\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn target\n\t\t}\n\n\t\t// unbind all callbacks for an evt\n\t\tevt = '' + evt;\n\n\t\t// invoke method for each space-separated event from a list\n\t\tevt.split(/\\s+/).forEach(function (evt) {\n\t\t\tvar evtParts = evt.split('.');\n\t\t\tevt = evtParts.shift();\n\t\t\tcallbacks = listeners.get(target, evt, evtParts);\n\n\t\t\t// returned array of callbacks (as event is defined)\n\t\t\tif (evt) {\n\t\t\t\tvar obj = {};\n\t\t\t\tobj[evt] = callbacks;\n\t\t\t\tcallbacks = obj;\n\t\t\t}\n\n\t\t\t// for each group of callbacks - unbind all\n\t\t\tfor (var evtName in callbacks) {\n\t\t\t\t[].slice.call(callbacks[evtName]).forEach(function (cb) {\n\t\t\t\t\toff(target, evtName, cb);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t}\n\n\tif (!Array.isArray(evt)) evt = (evt + '').split(/\\s+/)\n\n\t// target events (string notation to advanced_optimizations)\n\tvar offMethod = target.removeEventListener || target.removeListener || target.detachEvent || target.off;\n\n\t// invoke method for each space-separated event from a list\n\tevt.forEach(function (evt) {\n\t\tvar evtParts = evt.split('.');\n\t\tevt = evtParts.shift();\n\n\t\t// use target `off`, if possible\n\t\tif (offMethod) {\n\t\t\t// avoid self-recursion from the outside\n\t\t\tif (icicle.freeze(target, 'off' + evt)) {\n\t\t\t\toffMethod.call(target, evt, fn);\n\t\t\t\ticicle.unfreeze(target, 'off' + evt);\n\t\t\t}\n\n\t\t\t// if it\u2019s frozen - ignore call\n\t\t\telse {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\n\t\t// forget callback\n\t\tlisteners.remove(target, evt, fn, evtParts);\n\t});\n\n\tif (fn.__wrapFn) {\n\t\tvar cb = fn.__wrapFn;\n\t\tfn.__wrapFn = null;\n\t\toff(target, evt, cb)\n\t}\n\tif (fn.__origFn) {\n\t\tvar cb = fn.__origFn;\n\t\tfn.__origFn = null;\n\t\toff(target, evt, cb)\n\t}\n\n\treturn target;\n}\n", "/**\n * @module emmy/on\n */\n'use strict'\n\nvar icicle = require('icicle');\nvar listeners = require('./listeners');\nvar off = require('./off')\n\nmodule.exports = on;\n\n\n/**\n * Bind fn to a target.\n *\n * @param {*} targte A single target to bind evt\n * @param {string} evt An event name\n * @param {Function} fn A callback\n * @param {Function}? condition An optional filtering fn for a callback\n *                              which accepts an event and returns callback\n *\n * @return {object} A target\n */\nfunction on(target, evt, cb, o = {}) {\n\tif (!target) return target;\n\n\t// wrap delegate\n\tif (typeof target === 'string' || o.target) {\n\t\twhile (cb.__wrapFn) cb = cb.__wrapFn;\n\n\t\tvar selector = target\n\t\ttarget = o.target || document\n\t\tcb.__wrapFn = delegate.bind({ target: target, selector: selector, cb: cb });\n\t\tcb.__wrapFn.__origFn = cb;\n\t\tcb = cb.__wrapFn;\n\t}\n\n\tif (!Array.isArray(evt)) evt = (evt + '').split(/\\s+/)\n\n\t// get target `on` method, if any\n\t// prefer native method name\n\tvar onMethod = target.addEventListener || target.addListener || target.attachEvent || target.on;\n\n\t// invoke method for each space-separated event from a list\n\tevt.forEach(function (evt) {\n\t\tvar evtParts = evt.split('.');\n\t\tevt = evtParts.shift();\n\n\t\t// use target event system, if possible\n\t\tif (onMethod) {\n\t\t\t// avoid self-recursions\n\t\t\t// if it is frozen - ignore call\n\t\t\t// FIXME: do better by comparing with self\n\t\t\tif (icicle.freeze(target, 'on' + evt)) {\n\t\t\t\tonMethod.call(target, evt, cb);\n\t\t\t\ticicle.unfreeze(target, 'on' + evt);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\n\t\t// save the callback\n\t\tlisteners.add(target, evt, cb, evtParts);\n\t});\n\n\treturn function () { off(target, evt, cb) };\n}\n\nfunction delegate(e) {\n\tvar cb = this.cb;\n\tvar selector = this.selector;\n\tvar container = this.target;\n\n\tvar srcEl = e.target;\n\n\t//deny self instantly\n\tif (srcEl === container) {\n\t\treturn;\n\t}\n\n\t//wrap to detect list of selectors\n\tif (!Array.isArray(selector)) {\n\t\tselector = [selector];\n\t}\n\n\tif (selector.some(function (selector) {\n\t\tvar delegateTarget;\n\t\tif (typeof selector != 'string') {\n\t\t\tif (!selector.contains(srcEl)) return false;\n\t\t\tdelegateTarget = selector;\n\t\t}\n\t\t//find at least one element in-between delegate target and event source\n\t\telse {\n\t\t\tdelegateTarget = srcEl.closest && srcEl.closest(selector);\n\t\t}\n\n\t\tif (delegateTarget && container !== delegateTarget && container.contains(delegateTarget)) {\n\t\t\t//save source of event\n\t\t\te.delegateTarget = delegateTarget;\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t})) {\n\t\tcb.apply(srcEl, arguments)\n\t}\n}\n", "/**\n * @module emmy/emit\n */\nvar icicle = require('icicle');\nvar listeners = require('./listeners');\n\n\n/**\n * A simple wrapper to handle stringy/plain events\n */\nmodule.exports = function (target, evt, a, b){\n\tif (!target) return;\n\n\tvar args = arguments;\n\n\t// event string\n\tif (typeof evt === 'string') {\n\t\targs = [].slice.call(arguments, 2);\n\t\tevt.split(/\\s+/).forEach(function(evt){\n\t\t\temit.apply(this, [target, evt].concat(args));\n\t\t});\n\n\t\treturn target\n\t}\n\n\t// Event instance\n\treturn emit.apply(this, args);\n};\n\n\n/** detect env */\nvar $ = typeof jQuery === 'undefined' ? undefined : jQuery;\nvar doc = typeof document === 'undefined' ? undefined : document;\nvar win = typeof window === 'undefined' ? undefined : window;\n\n\n/**\n * Emit an event, optionally with data or bubbling\n * Accept only single elements/events\n *\n * @param {string} eventName An event name, e. g. 'click'\n * @param {*} data Any data to pass to event.details (DOM) or event.data (elsewhere)\n * @param {bool} bubbles Whether to trigger bubbling event (DOM)\n *\n *\n * @return {target} a target\n */\nfunction emit(target, eventName, data, bubbles){\n\tvar emitMethod, evt = eventName;\n\n\t//Create proper event for DOM objects\n\tif (doc && ((target instanceof Node) || target === win)) {\n\t\t//NOTE: this doesnot bubble on off-DOM elements\n\n\t\tif (doc && eventName instanceof Event) {\n\t\t\tevt = eventName;\n\t\t} else {\n\t\t\t//IE9-compliant constructor\n\t\t\tevt = doc.createEvent('CustomEvent');\n\t\t\tevt.initCustomEvent(eventName, bubbles, true, data);\n\n\t\t\t//a modern constructor would be:\n\t\t\t// var evt = new CustomEvent(eventName, { detail: data, bubbles: bubbles })\n\t\t}\n\n\t\temitMethod = target.dispatchEvent;\n\t}\n\n\t//create event for jQuery object\n\telse if ($ && target instanceof $) {\n\t\t//TODO: decide how to pass data\n\t\tevt = $.Event( eventName, data );\n\t\tevt.detail = data;\n\n\t\t//FIXME: reference case where triggerHandler needed (something with multiple calls)\n\t\temitMethod = bubbles ? targte.trigger : target.triggerHandler;\n\t}\n\n\t//detect target events\n\telse {\n\t\t//emit - default\n\t\t//trigger - jquery\n\t\t//dispatchEvent - DOM\n\t\t//raise - node-state\n\t\t//fire - ???\n\t\temitMethod = target.dispatchEvent || target.emit || target.trigger || target.fire || target.raise;\n\t}\n\n\tvar args = [].slice.call(arguments, 2);\n\n\t//use locks to avoid self-recursion on objects wrapping this method\n\tif (emitMethod) {\n\t\tif (icicle.freeze(target, 'emit' + eventName)) {\n\t\t\t//use target event system, if possible\n\t\t\temitMethod.apply(target, [evt].concat(args));\n\t\t\ticicle.unfreeze(target, 'emit' + eventName);\n\n\t\t\treturn target;\n\t\t}\n\n\t\t//if event was frozen - probably it is emitter instance\n\t\t//so perform normal callback\n\t}\n\n\t// invoke method for each space-separated event from a list\n\tvar evtParts = evt.split('.');\n\tevt = evtParts.shift();\n\n\t//fall back to default event system\n\tvar evtCallbacks = listeners.get(target, evt, evtParts);\n\n\t//copy callbacks to fire because list can be changed by some callback (like `off`)\n\tvar fireList = evtCallbacks.slice();\n\tfor (var i = 0; i < fireList.length; i++ ) {\n\t\tfireList[i] && fireList[i].apply(target, args);\n\t}\n\n\treturn target;\n}\n", "module.exports.on = require('./on')\nmodule.exports.off = require('./off')\nmodule.exports.emit = require('./emit')\n", "/**\r\n * Get clientY/clientY from an event.\r\n * If index is passed, treat it as index of global touches, not the targetTouches.\r\n * Global touches include target touches.\r\n *\r\n * @module get-client-xy\r\n *\r\n * @param {Event} e Event raised, like mousemove\r\n *\r\n * @return {number} Coordinate relative to the screen\r\n */\r\nfunction getClientY (e, idx) {\r\n\t// touch event\r\n\tif (e.touches) {\r\n\t\tif (arguments.length > 1) {\r\n\t\t\treturn findTouch(e.touches, idx).clientY\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn e.targetTouches[0].clientY;\r\n\t\t}\r\n\t}\r\n\r\n\t// mouse event\r\n\treturn e.clientY;\r\n}\r\nfunction getClientX (e, idx) {\r\n\t// touch event\r\n\tif (e.touches) {\r\n\t\tif (arguments.length > idx) {\r\n\t\t\treturn findTouch(e.touches, idx).clientX;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn e.targetTouches[0].clientX;\r\n\t\t}\r\n\t}\r\n\r\n\t// mouse event\r\n\treturn e.clientX;\r\n}\r\n\r\nfunction getClientXY (e, idx) {\r\n\treturn [getClientX.apply(this, arguments), getClientY.apply(this, arguments)];\r\n}\r\n\r\nfunction findTouch (touchList, idx) {\r\n\tfor (var i = 0; i < touchList.length; i++) {\r\n\t\tif (touchList[i].identifier === idx) {\r\n\t\t\treturn touchList[i];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\ngetClientXY.x = getClientX;\r\ngetClientXY.y = getClientY;\r\ngetClientXY.findTouch = findTouch;\r\n\r\nmodule.exports = getClientXY;", "/*!\n * is-primitive <https://github.com/jonschlinkert/is-primitive>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isPrimitive(val) {\n  if (typeof val === 'object') {\n    return val === null;\n  }\n  return typeof val !== 'function';\n};\n", "/**\r\n * @module  st8\r\n *\r\n * Micro state machine.\r\n */\r\n'use strict'\r\n\r\n\r\nvar isPrimitive = require('is-primitive')\r\n\r\n\r\n// API constants\r\nState.OTHERWISE = '_'\r\nState.ENTER = 'enter'\r\nState.EXIT = 'exit'\r\n\r\n\r\n/**\r\n * Create a new state controller based on states passed\r\n *\r\n * @constructor\r\n *\r\n * @param {object} settings Initial states\r\n */\r\n\r\nfunction State(states, context){\r\n\t//ignore existing state\r\n\tif (states instanceof State) return states;\r\n\r\n\t//ensure new state instance is created\r\n\tif (!(this instanceof State)) return new State(states);\r\n\r\n\t//save states object\r\n\tthis.states = states || {};\r\n\r\n\t//save context\r\n\tthis.context = context || this;\r\n\r\n\t//initedFlag\r\n\tthis.inited = false;\r\n}\r\n\r\n\r\n/**\r\n * Go to a state\r\n *\r\n * @param {*} value Any new state to enter\r\n */\r\n\r\nState.prototype.set = function (value) {\r\n\tvar prevValue = this.state, states = this.states;\r\n\tvar ENTER = State.ENTER, EXIT = State.EXIT, OTHERWISE = State.OTHERWISE\r\n\t// console.group('set', value, prevValue);\r\n\r\n\t//leave old state\r\n\tvar oldStateName = states[prevValue] !== undefined ? prevValue : OTHERWISE\r\n\tvar oldState = states[oldStateName];\r\n\r\n\tvar leaveResult, leaveFlag = EXIT + oldStateName;\r\n\tif (this.inited) {\r\n\t\tif (oldState) {\r\n\t\t\tif (!this[leaveFlag]) {\r\n\t\t\t\tthis[leaveFlag] = true;\r\n\r\n\t\t\t\t//if oldState has after method - call it\r\n\t\t\t\tleaveResult = oldState[EXIT] && oldState[EXIT].call ?\r\n\t\t\t\t\t\toldState[EXIT].call(this.context) :\r\n\t\t\t\t\toldState[1] && oldState[1].call ?\r\n\t\t\t\t\t\toldState[1].call(this.context) : oldState[EXIT]\r\n\r\n\t\t\t\t//ignore changing if leave result is falsy\r\n\t\t\t\tif (leaveResult === false) {\r\n\t\t\t\t\tthis[leaveFlag] = false;\r\n\t\t\t\t\t// console.groupEnd();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//redirect, if returned anything\r\n\t\t\t\telse if (leaveResult !== undefined && leaveResult !== value) {\r\n\t\t\t\t\tthis.set(leaveResult);\r\n\t\t\t\t\tthis[leaveFlag] = false;\r\n\t\t\t\t\t// console.groupEnd();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis[leaveFlag] = false;\r\n\r\n\t\t\t\t//ignore redirect\r\n\t\t\t\tif (this.state !== prevValue) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//ignore not changed value\r\n\t\tif (value === prevValue) return false;\r\n\t}\r\n\telse {\r\n\t\tthis.inited = true;\r\n\t}\r\n\r\n\t//set current value\r\n\tthis.state = value;\r\n\r\n\r\n\t//try to enter new state\r\n\tvar newStateName = states.hasOwnProperty(value) ? value : OTHERWISE\r\n\tvar newState = states[newStateName];\r\n\tvar enterResult;\r\n\tvar enterFlag = ENTER + newStateName;\r\n\r\n\tif (!this[enterFlag]) {\r\n\t\tthis[enterFlag] = true;\r\n\r\n\t\tif (newState) {\r\n\t\t\t// enter pure function\r\n\t\t\tif (newState.call) {\r\n\t\t\t\tenterResult = newState.call(this.context)\r\n\t\t\t}\r\n\t\t\t// enter array\r\n\t\t\telse if (Array.isArray(newState)) {\r\n\t\t\t\tenterResult = (newState[0] && newState[0].call) ? newState[0].call(this.context, this) : newState[0]\r\n\t\t\t}\r\n\t\t\t// enter object with enter method\r\n\t\t\telse if (newState.hasOwnProperty(ENTER)) {\r\n\t\t\t\tenterResult = newState[ENTER].call ? newState[ENTER].call(this.context) : newState[ENTER];\r\n\t\t\t}\r\n\t\t\telse if (isPrimitive(newState)) {\r\n\t\t\t\tenterResult = newState\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tenterResult = newState\r\n\t\t}\r\n\r\n\t\t//ignore entering falsy state\r\n\t\tif (enterResult === false) {\r\n\t\t\tthis.set(prevValue);\r\n\t\t\tthis[enterFlag] = false;\r\n\t\t\t// console.groupEnd();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//redirect if returned anything but current state\r\n\t\telse if (enterResult !== undefined && enterResult !== value) {\r\n\t\t\tthis.set(enterResult);\r\n\t\t\tthis[enterFlag] = false;\r\n\t\t\t// console.groupEnd();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis[enterFlag] = false;\r\n\t}\r\n\r\n\t// console.groupEnd();\r\n\r\n\t//return context to chain calls\r\n\treturn this.context;\r\n};\r\n\r\n\r\n/** Get current state */\r\n\r\nState.prototype.get = function(){\r\n\treturn this.state;\r\n};\r\n\r\nmodule.exports = State;\r\n", "/**\r\n * Define stateful property on an object\r\n */\r\nmodule.exports = defineState;\r\n\r\nvar State = require('st8');\r\n\tState.ENTER = 'before'\r\n\tState.EXIT = 'after'\r\n\r\n/**\r\n * Define stateful property on a target\r\n *\r\n * @param {object} target Any object\r\n * @param {string} property Property name\r\n * @param {object} descriptor State descriptor\r\n *\r\n * @return {object} target\r\n */\r\nfunction defineState (target, property, descriptor, isFn) {\r\n\t//define accessor on a target\r\n\tif (isFn) {\r\n\t\ttarget[property] = function () {\r\n\t\t\tif (arguments.length) {\r\n\t\t\t\treturn state.set(arguments[0]);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn state.get();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t//define setter/getter on a target\r\n\telse {\r\n\t\tObject.defineProperty(target, property, {\r\n\t\t\tset: function (value) {\r\n\t\t\t\treturn state.set(value);\r\n\t\t\t},\r\n\t\t\tget: function () {\r\n\t\t\t\treturn state.get();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//define state controller\r\n\tvar state = new State(descriptor, target);\r\n\r\n\treturn target;\r\n}\r\n", "import offsets from 'mucss/offset'\nimport { on, off, emit } from 'emmy';\nimport { x as getClientX, y as getClientY } from 'get-client-xy';\nimport defineState from 'define-state';\n\n\nconst win = window, doc = document, root = doc.documentElement;\n\n/** Current number of draggable touches */\nlet touches = 0;\n\n/**\n * Make an element draggable.\n *\n * @constructor\n *\n * @param {HTMLElement} target An element whether in/out of DOM\n * @param {Object} options An draggable options\n *\n * @return {HTMLElement} Target element\n */\nclass Draggable {\n\t/**\n\t * Draggable instances associated with elements.\n\t *\n\t * Storing them on elements is\n\t * - leak-prone,\n\t * - pollutes element\u2019s namespace,\n\t * - requires some artificial key to store,\n\t * - unable to retrieve controller easily.\n\t *\n\t * That is why weakmap.\n\t */\n\tstatic cache = new WeakMap;\n\n\n\t//enable css3 by default\n\tcss3 = true;\n\n\t//both axes by default\n\taxis = null;\n\n\n\tconstructor(target, options) {\n\t\t//ignore existing instance\n\t\tvar instance = Draggable.cache.get(target);\n\t\tif (instance) {\n\t\t\tinstance.state = 'reset';\n\n\t\t\t//take over options\n\t\t\tObject.assign(instance, options);\n\n\t\t\tinstance.update();\n\n\t\t\treturn instance;\n\t\t}\n\n\t\telse {\n\t\t\t//get unique id for instance\n\t\t\t//needed to track event binders\n\t\t\tthis.id = Math.random().toString(36).substring(2, 15)\n\t\t\tthis._ns = '.draggy_' + this.id;\n\n\t\t\t//save element passed\n\t\t\tthis.element = target;\n\n\t\t\tDraggable.cache.set(target, this);\n\t\t}\n\n\t\t//define state behaviour\n\t\tdefineState(this, 'state', Draggable.state);\n\n\t\t//preset handles\n\t\tthis.currentHandles = [];\n\n\t\t//take over options\n\t\tObject.assign(this, options);\n\n\t\t//define handle\n\t\tif (this.handle === undefined) {\n\t\t\tthis.handle = this.element;\n\t\t}\n\n\t\t//setup droppable\n\t\tif (this.droppable) {\n\t\t\ton(this, 'dragstart', () => {\n\t\t\t\tthis.dropTargets = q(this.droppable);\n\t\t\t});\n\n\t\t\ton(this, 'drag', () => {\n\t\t\t\tif (!this.dropTargets) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar rect = offsets(this.element);\n\n\t\t\t\tthis.dropTargets.forEach((dropTarget) => {\n\t\t\t\t\tvar targetRect = offsets(dropTarget);\n\n\t\t\t\t\tif (intersect(rect, targetRect, this.droppableTolerance)) {\n\t\t\t\t\t\tif (this.droppableClass) {\n\t\t\t\t\t\t\tdropTarget.classList.add(this.droppableClass);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!this.dropTarget) {\n\t\t\t\t\t\t\tthis.dropTarget = dropTarget;\n\n\t\t\t\t\t\t\temit(this, 'dragover', dropTarget);\n\t\t\t\t\t\t\temit(dropTarget, 'dragover', this);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (this.dropTarget) {\n\t\t\t\t\t\t\temit(this, 'dragout', dropTarget);\n\t\t\t\t\t\t\temit(dropTarget, 'dragout', this);\n\n\t\t\t\t\t\t\tthis.dropTarget = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.droppableClass) {\n\t\t\t\t\t\t\tdropTarget.classList.remove(this.droppableClass);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ton(this, 'dragend', () => {\n\t\t\t\t//emit drop, if any\n\t\t\t\tif (this.dropTarget) {\n\t\t\t\t\temit(this.dropTarget, 'drop', this);\n\t\t\t\t\temit(this, 'drop', this.dropTarget);\n\t\t\t\t\tthis.dropTarget.classList.remove(this.droppableClass);\n\t\t\t\t\tthis.dropTarget = null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t//try to calc out basic limits\n\t\tthis.update();\n\n\t\t//go to initial state\n\t\tthis.state = 'idle';\n\t}\n\n\t// Emitter API\n\ton(eventName, callback) {\n\t\treturn on(this, eventName, callback);\n\t}\n\n\toff(eventName, callback) {\n\t\treturn off(this, eventName, callback);\n\t}\n\n\t// draggable states\n\tstatic state = {\n\t\t//idle\n\t\t_: {\n\t\t\tbefore: function () {\n\t\t\t\tthis.element.classList.add('draggy-idle');\n\n\t\t\t\t//emit drag evts on element\n\t\t\t\temit(this.element, 'idle', null, true);\n\t\t\t\temit(this, 'idle');\n\n\t\t\t\t//reset keys\n\t\t\t\tthis.ctrlKey = false;\n\t\t\t\tthis.shiftKey = false;\n\t\t\t\tthis.metaKey = false;\n\t\t\t\tthis.altKey = false;\n\n\t\t\t\t//reset movement params\n\t\t\t\tthis.movementX = 0;\n\t\t\t\tthis.movementY = 0;\n\t\t\t\tthis.deltaX = 0;\n\t\t\t\tthis.deltaY = 0;\n\n\t\t\t\ton(doc, 'mousedown' + this._ns + ' touchstart' + this._ns, (e) => {\n\t\t\t\t\t//ignore non-draggy events\n\t\t\t\t\tif (!e.draggies) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//ignore dragstart for not registered draggies\n\t\t\t\t\tif (e.draggies.indexOf(this) < 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//if target is focused - ignore drag\n\t\t\t\t\t//FIXME: detect focused by whitelist of tags, name supposition may be wrong (idk, form elements have names, so likely to be focused by click)\n\t\t\t\t\tif (e.target.name !== undefined) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//multitouch has multiple starts\n\t\t\t\t\tthis.setTouch(e);\n\n\t\t\t\t\t//update movement params\n\t\t\t\t\tthis.update(e);\n\n\t\t\t\t\t//go to threshold state\n\t\t\t\t\tthis.state = 'threshold';\n\t\t\t\t});\n\t\t\t},\n\t\t\tafter: function () {\n\t\t\t\tthis.element.classList.remove('draggy-idle');\n\n\t\t\t\toff(doc, this._ns);\n\n\t\t\t\t//set up tracking\n\t\t\t\tif (this.release) {\n\t\t\t\t\tthis._trackingInterval = setInterval((e) => {\n\t\t\t\t\t\tvar now = Date.now();\n\t\t\t\t\t\tvar elapsed = now - this.timestamp;\n\n\t\t\t\t\t\t//get delta movement since the last track\n\t\t\t\t\t\tvar dX = this.prevX - this.frame[0];\n\t\t\t\t\t\tvar dY = this.prevY - this.frame[1];\n\t\t\t\t\t\tthis.frame[0] = this.prevX;\n\t\t\t\t\t\tthis.frame[1] = this.prevY;\n\n\t\t\t\t\t\tvar delta = Math.sqrt(dX * dX + dY * dY);\n\n\t\t\t\t\t\t//get speed as average of prev and current (prevent div by zero)\n\t\t\t\t\t\tvar v = Math.min(this.velocity * delta / (1 + elapsed), this.maxSpeed);\n\t\t\t\t\t\tthis.speed = 0.8 * v + 0.2 * this.speed;\n\n\t\t\t\t\t\t//get new angle as a last diff\n\t\t\t\t\t\t//NOTE: vector average isn\u2019t the same as speed scalar average\n\t\t\t\t\t\tthis.angle = Math.atan2(dY, dX);\n\n\t\t\t\t\t\temit(this, 'track');\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}, this.framerate);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tthreshold: {\n\t\t\tbefore: function () {\n\t\t\t\t//ignore threshold state, if threshold is none\n\t\t\t\tif (isZeroArray(this.threshold)) {\n\t\t\t\t\tthis.state = 'drag';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.element.classList.add('draggy-threshold');\n\n\t\t\t\t//emit drag evts on element\n\t\t\t\temit(this, 'threshold');\n\t\t\t\temit(this.element, 'threshold');\n\n\t\t\t\t//listen to doc movement\n\t\t\t\ton(doc, 'touchmove' + this._ns + ' mousemove' + this._ns, (e) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t//compare movement to the threshold\n\t\t\t\t\tvar clientX = getClientX(e, this.touchIdx);\n\t\t\t\t\tvar clientY = getClientY(e, this.touchIdx);\n\t\t\t\t\tvar difX = this.prevMouseX - clientX;\n\t\t\t\t\tvar difY = this.prevMouseY - clientY;\n\n\t\t\t\t\tif (difX < this.threshold[0] || difX > this.threshold[2] || difY < this.threshold[1] || difY > this.threshold[3]) {\n\t\t\t\t\t\tthis.update(e);\n\t\t\t\t\t\tthis.state = 'drag';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ton(doc, 'mouseup' + this._ns + ' touchend' + this._ns + '', (e) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t//forget touches\n\t\t\t\t\ttouches = 0;\n\t\t\t\t\tthis.touchIdx = null;\n\n\n\t\t\t\t\tthis.state = 'idle';\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tafter: function () {\n\t\t\t\tthis.element.classList.remove('draggy-threshold');\n\t\t\t\toff(doc, this._ns);\n\t\t\t}\n\t\t},\n\n\t\tdrag: {\n\t\t\tbefore: function () {\n\t\t\t\t//reduce dragging clutter\n\t\t\t\tselection.disable(root);\n\n\t\t\t\tthis.element.classList.add('draggy-drag');\n\n\t\t\t\t//emit drag evts on element\n\t\t\t\temit(this, 'dragstart');\n\t\t\t\temit(this.element, 'dragstart', null, true);\n\n\t\t\t\t//emit drag events on this\n\t\t\t\temit(this, 'drag');\n\t\t\t\temit(this.element, 'drag', null, true);\n\n\t\t\t\t//stop drag on leave\n\t\t\t\ton(doc, 'touchend' + this._ns + ' mouseup' + this._ns + ' mouseleave' + this._ns, (e) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t//forget touches - dragend is called once\n\t\t\t\t\ttouches = 0;\n\t\t\t\t\tthis.touchIdx = null;\n\n\n\t\t\t\t\t//manage release movement\n\t\t\t\t\tif (this.speed > 1) {\n\t\t\t\t\t\tthis.state = 'release';\n\t\t\t\t\t}\n\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.state = 'idle';\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//move via transform\n\t\t\t\ton(doc, 'touchmove' + this._ns + ' mousemove' + this._ns, (e) => {\n\t\t\t\t\tthis.drag(e);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tafter: function () {\n\t\t\t\t//enable document interactivity\n\t\t\t\tselection.enable(root);\n\n\t\t\t\tthis.element.classList.remove('draggy-drag');\n\n\t\t\t\t//emit dragend on element, this\n\t\t\t\temit(this, 'dragend');\n\t\t\t\temit(this.element, 'dragend', null, true);\n\n\t\t\t\t//unbind drag events\n\t\t\t\toff(doc, this._ns);\n\n\t\t\t\tclearInterval(this._trackingInterval);\n\t\t\t}\n\t\t},\n\n\t\trelease: {\n\t\t\tbefore: function () {\n\t\t\t\tthis.element.classList.add('draggy-release');\n\n\t\t\t\t//enter animation mode\n\t\t\t\tclearTimeout(this._animateTimeout);\n\n\t\t\t\t//set proper transition\n\t\t\t\tthis.element.style.transition = (this.releaseDuration) + 'ms ease-out ' + (this.css3 ? 'transform' : 'position');\n\n\t\t\t\t//plan leaving anim mode\n\t\t\t\tthis._animateTimeout = setTimeout(() => {\n\t\t\t\t\tthis.state = 'idle';\n\t\t\t\t}, this.releaseDuration);\n\n\n\t\t\t\t//calc target point & animate to it\n\t\t\t\tthis.move(\n\t\t\t\t\tthis.prevX + this.speed * Math.cos(this.angle),\n\t\t\t\t\tthis.prevY + this.speed * Math.sin(this.angle)\n\t\t\t\t);\n\n\t\t\t\tthis.speed = 0;\n\t\t\t\temit(this, 'track');\n\t\t\t},\n\n\t\t\tafter: function () {\n\t\t\t\tthis.element.classList.remove('draggy-release');\n\t\t\t\tthis.element.style.transition = null;\n\t\t\t}\n\t\t},\n\n\t\treset: function () {\n\t\t\tthis.currentHandles.forEach((handle) => {\n\t\t\t\toff(handle, this._ns);\n\t\t\t});\n\n\t\t\tclearTimeout(this._animateTimeout);\n\n\t\t\toff(doc, this._ns);\n\t\t\toff(this.element, this._ns);\n\n\t\t\treturn '_';\n\t\t}\n\t}\n\n\t// drag handler. needed to provide drag movement emulation via API\n\tdrag(e) {\n\t\te.preventDefault();\n\n\t\tvar mouseX = getClientX(e, this.touchIdx),\n\t\t\tmouseY = getClientY(e, this.touchIdx);\n\n\t\t//calc mouse movement diff\n\t\tvar diffMouseX = mouseX - this.prevMouseX,\n\t\t\tdiffMouseY = mouseY - this.prevMouseY;\n\n\t\t//absolute mouse coordinate\n\t\tvar mouseAbsX = mouseX,\n\t\t\tmouseAbsY = mouseY;\n\n\t\t//if we are not fixed, our absolute position is relative to the doc\n\t\tif (!this._isFixed) {\n\t\t\tmouseAbsX += win.pageXOffset;\n\t\t\tmouseAbsY += win.pageYOffset;\n\t\t}\n\n\t\t//calc sniper offset, if any\n\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\tthis.sniperOffsetX += diffMouseX * this.sniperSlowdown;\n\t\t\tthis.sniperOffsetY += diffMouseY * this.sniperSlowdown;\n\t\t}\n\n\t\t//save refs to the meta keys\n\t\tthis.ctrlKey = e.ctrlKey;\n\t\tthis.shiftKey = e.shiftKey;\n\t\tthis.metaKey = e.metaKey;\n\t\tthis.altKey = e.altKey;\n\n\t\t//calc movement x and y\n\t\t//take absolute placing as it is the only reliable way (2x proved)\n\t\tvar x = (mouseAbsX - this.initOffsetX) - this.innerOffsetX - this.sniperOffsetX,\n\t\t\ty = (mouseAbsY - this.initOffsetY) - this.innerOffsetY - this.sniperOffsetY;\n\n\t\t//move element\n\t\tthis.move(x, y);\n\n\t\t//save prevClientXY for calculating diff\n\t\tthis.prevMouseX = mouseX;\n\t\tthis.prevMouseY = mouseY;\n\n\t\t//emit drag\n\t\temit(this, 'drag');\n\t\temit(this.element, 'drag', null, true);\n\t}\n\n\t// manage touches\n\tsetTouch(e) {\n\t\tif (!e.touches || this.touchIdx !== null) return this;\n\n\t\t//current touch index\n\t\tthis.touchIdx = touches;\n\t\ttouches++;\n\t}\n\n\t// index to fetch touch number from event\n\ttouchIdx = null;\n\n\t// update movement limits. refresh this.withinOffsets and this.limits.\n\tupdate(e) {\n\t\tthis._isFixed = isFixed(this.element);\n\n\t\t//enforce abs position\n\t\tif (!this.css3) {\n\t\t\tthis.element.style.position = 'absolute';\n\t\t}\n\n\t\t//update handles\n\t\tthis.currentHandles.forEach((handle) => {\n\t\t\toff(handle, this._ns);\n\t\t});\n\n\t\tvar cancelEls = q(this.cancel);\n\n\t\tthis.currentHandles = q(this.handle);\n\n\t\tthis.currentHandles.forEach((handle) => {\n\t\t\ton(handle, 'mousedown' + this._ns + ' touchstart' + this._ns, (e) => {\n\t\t\t\t//mark event as belonging to the draggy\n\t\t\t\tif (!e.draggies) {\n\t\t\t\t\te.draggies = [];\n\t\t\t\t}\n\n\t\t\t\t//ignore draggies containing other draggies\n\t\t\t\tif (e.draggies.some((draggy) => {\n\t\t\t\t\treturn this.element.contains(draggy.element);\n\t\t\t\t})) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//ignore events happened within cancelEls\n\t\t\t\tif (cancelEls.some((cancelEl) => {\n\t\t\t\t\treturn cancelEl.contains(e.target);\n\t\t\t\t})) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//register draggy\n\t\t\t\te.draggies.push(this);\n\t\t\t});\n\t\t});\n\n\t\t//update limits\n\t\tthis.updateLimits();\n\n\t\t//preset inner offsets\n\t\tthis.innerOffsetX = this.pin[0];\n\t\tthis.innerOffsetY = this.pin[1];\n\n\t\tvar thisClientRect = this.element.getBoundingClientRect();\n\n\t\t//if event passed - update acc to event\n\t\tif (e) {\n\t\t\t//take last mouse position from the event\n\t\t\tthis.prevMouseX = getClientX(e, this.touchIdx);\n\t\t\tthis.prevMouseY = getClientY(e, this.touchIdx);\n\n\t\t\t//if mouse is within the element - take offset normally as rel displacement\n\t\t\tthis.innerOffsetX = -thisClientRect.left + getClientX(e, this.touchIdx);\n\t\t\tthis.innerOffsetY = -thisClientRect.top + getClientY(e, this.touchIdx);\n\t\t}\n\t\t//if no event - suppose pin-centered event\n\t\telse {\n\t\t\t//take mouse position & inner offset as center of pin\n\t\t\tvar pinX = (this.pin[0] + this.pin[2]) * 0.5;\n\t\t\tvar pinY = (this.pin[1] + this.pin[3]) * 0.5;\n\t\t\tthis.prevMouseX = thisClientRect.left + pinX;\n\t\t\tthis.prevMouseY = thisClientRect.top + pinY;\n\t\t\tthis.innerOffsetX = pinX;\n\t\t\tthis.innerOffsetY = pinY;\n\t\t}\n\n\t\t//set initial kinetic props\n\t\tthis.speed = 0;\n\t\tthis.amplitude = 0;\n\t\tthis.angle = 0;\n\t\tthis.timestamp = +new Date();\n\t\tthis.frame = [this.prevX, this.prevY];\n\n\t\t//set sniper offset\n\t\tthis.sniperOffsetX = 0;\n\t\tthis.sniperOffsetY = 0;\n\t};\n\n\t// update limits only from current position\n\tupdateLimits() {\n\t\t//initial translation offsets\n\t\tvar initXY = this.getCoords();\n\n\t\t//calc initial coords\n\t\tthis.prevX = initXY[0];\n\t\tthis.prevY = initXY[1];\n\t\tthis.initX = initXY[0];\n\t\tthis.initY = initXY[1];\n\n\t\t//container rect might be outside the vp, so calc absolute offsets\n\t\t//zero-position offsets, with translation(0,0)\n\t\tvar curOffsets = offsets(this.element);\n\n\t\tthis.initOffsetX = curOffsets.left - this.prevX;\n\t\tthis.initOffsetY = curOffsets.top - this.prevY;\n\t\tthis.offsets = curOffsets;\n\n\t\t//handle parent case\n\t\tvar within = this.within;\n\t\tif (this.within === 'parent' || this.within === true) {\n\t\t\twithin = this.element.parentNode;\n\t\t}\n\t\twithin = within || doc;\n\n\t\t//absolute offsets of a container\n\t\tvar withinOffsets = offsets(within);\n\n\t\tif (within === win && this._isFixed) {\n\t\t\twithinOffsets.top -= win.pageYOffset;\n\t\t\twithinOffsets.left -= win.pageXOffset;\n\t\t\twithinOffsets.bottom -= win.pageYOffset;\n\t\t\twithinOffsets.right -= win.pageXOffset;\n\t\t}\n\t\tthis.withinOffsets = withinOffsets;\n\n\t\t//calculate movement limits - pin width might be wider than constraints\n\t\tthis.overflowX = this.pin.width - withinOffsets.width;\n\t\tthis.overflowY = this.pin.height - withinOffsets.height;\n\n\t\tthis.limits = {\n\t\t\tleft: withinOffsets.left - this.initOffsetX - this.pin[0] - (this.overflowX < 0 ? 0 : this.overflowX),\n\t\t\ttop: withinOffsets.top - this.initOffsetY - this.pin[1] - (this.overflowY < 0 ? 0 : this.overflowY),\n\t\t\tright: this.overflowX > 0 ? 0 : withinOffsets.right - this.initOffsetX - this.pin[2],\n\t\t\tbottom: (this.overflowY > 0 ? 0 : withinOffsets.bottom - this.initOffsetY - this.pin[3])\n\t\t};\n\t};\n\n\t// update info regarding of movement\n\tupdateInfo(x, y) {\n\t\t//provide delta from prev state\n\t\tthis.deltaX = x - this.prevX;\n\t\tthis.deltaY = y - this.prevY;\n\n\t\t//save prev coords to use as a start point next time\n\t\tthis.prevX = x;\n\t\tthis.prevY = y;\n\n\t\t//provide movement delta from initial state\n\t\tthis.movementX = x - this.initX;\n\t\tthis.movementY = y - this.initY;\n\t}\n\n\t// way of placement:\n\t// - css3 === false (slower but more precise and cross-browser)\n\t// - css3 === true (faster but may cause blurs on linux systems)\n\tgetCoords() {\n\t\tif (!this.css3) {\n\t\t\t// return [this.element.offsetLeft, this.element.offsetTop];\n\t\t\treturn [parseFloat(this.element.style.left), parseFloat(this.element.style.top)];\n\t\t}\n\t\telse {\n\t\t\treturn getTranslate(this.element).slice(0, 2) || [0, 0];\n\t\t}\n\t};\n\tsetCoords(x, y) {\n\t\tif (this.css3) {\n\t\t\tif (x == null) x = this.prevX;\n\t\t\tif (y == null) y = this.prevY;\n\n\t\t\tx = round(x, this.precision);\n\t\t\ty = round(y, this.precision);\n\n\t\t\tthis.element.style.transform = `translate3d(${x}px, ${y}px, 0)`;\n\n\t\t\tthis.updateInfo(x, y);\n\t\t}\n\t\telse {\n\t\t\tif (x == null) x = this.prevX;\n\t\t\tif (y == null) y = this.prevY;\n\n\t\t\tx = round(x, this.precision);\n\t\t\ty = round(y, this.precision);\n\n\t\t\tthis.element.style.left = x;\n\t\t\tthis.element.style.top = y;\n\n\t\t\t//update movement info\n\t\t\tthis.updateInfo(x, y);\n\t\t}\n\t}\n\n\t/**\n\t * Restricting container\n\t * @type {Element|object}\n\t * @default document.documentElement\n\t */\n\twithin = doc;\n\n\t/** Handle to drag */\n\thandle;\n\n\t/**\n\t * Which area of draggable should not be outside the restriction area.\n\t * @type {(Array|number)}\n\t * @default [0,0,this.element.offsetWidth, this.element.offsetHeight]\n\t */\n\tset pin(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 2) {\n\t\t\t\tthis._pin = [value[0], value[1], value[0], value[1]];\n\t\t\t} else if (value.length === 4) {\n\t\t\t\tthis._pin = value;\n\t\t\t}\n\t\t}\n\n\t\telse if (typeof value === 'number') {\n\t\t\tthis._pin = [value, value, value, value];\n\t\t}\n\n\t\telse {\n\t\t\tthis._pin = value;\n\t\t}\n\n\t\t//calc pin params\n\t\tthis._pin.width = this._pin[2] - this._pin[0];\n\t\tthis._pin.height = this._pin[3] - this._pin[1];\n\t}\n\n\tget pin() {\n\t\tif (this._pin) return this._pin;\n\n\t\t//returning autocalculated pin, if private pin is none\n\t\tvar pin = [0, 0, this.offsets.width, this.offsets.height];\n\t\tpin.width = this.offsets.width;\n\t\tpin.height = this.offsets.height;\n\t\treturn pin;\n\t}\n\n\t// Avoid initial mousemove\n\tset threshold(val) {\n\t\tif (typeof val === 'number') {\n\t\t\tthis._threshold = [-val * 0.5, -val * 0.5, val * 0.5, val * 0.5];\n\t\t} else if (val.length === 2) {\n\t\t\t//Array(w,h)\n\t\t\tthis._threshold = [-val[0] * 0.5, -val[1] * 0.5, val[0] * 0.5, val[1] * 0.5];\n\t\t} else if (val.length === 4) {\n\t\t\t//Array(x1,y1,x2,y2)\n\t\t\tthis._threshold = val;\n\t\t} else if (typeof (val) === 'function') {\n\t\t\t//custom val funciton\n\t\t\tthis._threshold = val();\n\t\t} else {\n\t\t\tthis._threshold = [0, 0, 0, 0];\n\t\t}\n\t}\n\n\tget threshold() {\n\t\treturn this._threshold || [0, 0, 0, 0];\n\t}\n\n\t// Movement release params\n\trelease = false;\n\treleaseDuration = 500;\n\tvelocity = 1000;\n\tmaxSpeed = 250;\n\tframerate = 50;\n\n\t// To what extent round position\n\tprecision = 1;\n\n\t// Droppable params\n\tdroppable = null;\n\tdroppableTolerance = 0.5;\n\tdroppableClass = null;\n\n\t// Slow down movement by pressing ctrl/cmd\n\tsniper = true;\n\n\t// How much to slow sniper drag\n\tsniperSlowdown = .85;\n\n\t// Restrict movement by axis\n\tmove(x, y) {\n\t\tif (this.axis === 'x') {\n\t\t\tif (x == null) x = this.prevX;\n\t\t\tif (y == null) y = this.prevY;\n\n\t\t\tvar limits = this.limits;\n\n\t\t\tif (this.repeat) {\n\t\t\t\tvar w = (limits.right - limits.left);\n\t\t\t\tvar oX = - this.initOffsetX + this.withinOffsets.left - this.pin[0] - Math.max(0, this.overflowX);\n\t\t\t\tx = loop(x - oX, w) + oX;\n\t\t\t} else {\n\t\t\t\tx = clamp(x, limits.left, limits.right);\n\t\t\t}\n\n\t\t\tthis.setCoords(x);\n\t\t}\n\t\telse if (this.axis === 'y') {\n\t\t\tif (x == null) x = this.prevX;\n\t\t\tif (y == null) y = this.prevY;\n\n\t\t\tvar limits = this.limits;\n\n\t\t\tif (this.repeat) {\n\t\t\t\tvar h = (limits.bottom - limits.top);\n\t\t\t\tvar oY = - this.initOffsetY + this.withinOffsets.top - this.pin[1] - Math.max(0, this.overflowY);\n\t\t\t\ty = loop(y - oY, h) + oY;\n\t\t\t} else {\n\t\t\t\ty = clamp(y, limits.top, limits.bottom);\n\t\t\t}\n\n\t\t\tthis.setCoords(null, y);\n\t\t}\n\t\telse {\n\t\t\tif (x == null) x = this.prevX;\n\t\t\tif (y == null) y = this.prevY;\n\n\t\t\tvar limits = this.limits;\n\n\t\t\tif (this.repeat) {\n\t\t\t\tvar w = (limits.right - limits.left);\n\t\t\t\tvar h = (limits.bottom - limits.top);\n\t\t\t\tvar oX = - this.initOffsetX + this.withinOffsets.left - this.pin[0] - Math.max(0, this.overflowX);\n\t\t\t\tvar oY = - this.initOffsetY + this.withinOffsets.top - this.pin[1] - Math.max(0, this.overflowY);\n\t\t\t\tif (this.repeat === 'x') {\n\t\t\t\t\tx = loop(x - oX, w) + oX;\n\t\t\t\t}\n\t\t\t\telse if (this.repeat === 'y') {\n\t\t\t\t\ty = loop(y - oY, h) + oY;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx = loop(x - oX, w) + oX;\n\t\t\t\t\ty = loop(y - oY, h) + oY;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tx = clamp(x, limits.left, limits.right);\n\t\t\ty = clamp(y, limits.top, limits.bottom);\n\n\t\t\tthis.setCoords(x, y);\n\t\t}\n\t}\n\n\t// Repeat movement by one of axises\n\trepeat = false;\n\n\t// Clean all memory-related things\n\tdestroy() {\n\t\tthis.currentHandles.forEach((handle) => {\n\t\t\toff(handle, this._ns);\n\t\t});\n\n\t\tthis.state = 'destroy';\n\n\t\tclearTimeout(this._animateTimeout);\n\n\t\toff(doc, this._ns);\n\t\toff(this.element, this._ns);\n\n\n\t\tthis.element = null;\n\t\tthis.within = null;\n\t};\n}\n\n\n// helpers\n// Check whether arr is filled with zeros\nfunction isZeroArray(arr) {\n\tif (!arr[0] && !arr[1] && !arr[2] && !arr[3]) return true;\n}\n\n// query els\nfunction q(str) {\n\tif (Array.isArray(str)) {\n\t\treturn str.map(q).reduce(function (prev, curr) { return prev.concat(curr); }, []);\n\t}\n\telse if (str instanceof HTMLElement) {\n\t\treturn [str];\n\t}\n\telse {\n\t\treturn [].slice.call(document.querySelectorAll(str));\n\t}\n}\n\n// rect intersection function with tolerance\nfunction intersect(rect1, rect2, tolerance = 0) {\n\tconst overlapX = Math.max(0, Math.min(rect1.right, rect2.right) - Math.max(rect1.left, rect2.left));\n\tconst overlapY = Math.max(0, Math.min(rect1.bottom, rect2.bottom) - Math.max(rect1.top, rect2.top));\n\tconst overlapArea = overlapX * overlapY;\n\n\tconst rect1Area = (rect1.right - rect1.left) * (rect1.bottom - rect1.top);\n\tconst rect2Area = (rect2.right - rect2.left) * (rect2.bottom - rect2.top);\n\tconst smallerArea = Math.min(rect1Area, rect2Area);\n\n\treturn overlapArea >= tolerance * smallerArea;\n}\n\n// maths\nfunction loop(value, left, right) {\n\t//detect single-arg case, like mod-loop or fmod\n\tif (right === undefined) {\n\t\tright = left;\n\t\tleft = 0;\n\t}\n\n\t//swap frame order\n\tif (left > right) {\n\t\tvar tmp = right;\n\t\tright = left;\n\t\tleft = tmp;\n\t}\n\n\tvar frame = right - left;\n\n\tvalue = ((value + left) % frame) - left;\n\tif (value < left) value += frame;\n\tif (value > right) value -= frame;\n\n\treturn value;\n};\n\nfunction clamp(value, min, max) {\n\treturn Math.max(min, Math.min(value, max));\n}\n\nfunction round(value, step) {\n\tif (step === 0) return value;\n\tif (!step) return Math.round(value);\n\tstep = parseFloat(step);\n\tvalue = Math.round(value / step) * step;\n\treturn parseFloat(value.toFixed(precision(step)));\n}\n\nfunction precision(n) {\n\tvar s = n + '',\n\t\td = s.indexOf('.') + 1;\n\n\treturn !d ? 0 : s.length - d;\n}\n\nconst selection = {\n\tdisable(el) {\n\t\tel.style.userSelect = 'none';\n\t\tel.style.userDrag = 'none';\n\t\tel.style.touchCallout = 'none';\n\t\tel.setAttribute('unselectable', 'on');\n\t\tel.addEventListener('selectstart', e => e.preventDefault());\n\t},\n\n\tenable(el) {\n\t\tel.style.userSelect = null;\n\t\tel.style.userDrag = null;\n\t\tel.style.touchCallout = null;\n\t\tel.removeAttribute('unselectable');\n\t\tel.removeEventListener('selectstart', e => e.preventDefault());\n\t}\n}\nfunction getTranslate(el) {\n\tvar translateStr = el.style.transform;\n\n\t//find translate token, retrieve comma-enclosed values\n\t//translate3d(1px, 2px, 2) \u2192 1px, 2px, 2\n\t//FIXME: handle nested calcs\n\tvar match = /translate(?:3d)?\\s*\\(([^\\)]*)\\)/.exec(translateStr);\n\n\tif (!match) return [0, 0];\n\tvar values = match[1].split(/\\s*,\\s*/);\n\n\t//parse values\n\t//FIXME: nested values are not necessarily pixels\n\treturn values.map((value) => parseValue(value));\n}\n\nfunction isFixed(el) {\n\tvar parentEl = el;\n\n\t//window is fixed, btw\n\tif (el === window) return true;\n\n\t//unlike the doc\n\tif (el === document) return false;\n\n\twhile (parentEl) {\n\t\tif (getComputedStyle(parentEl).position === 'fixed') return true;\n\t\tparentEl = parentEl.offsetParent;\n\t}\n\treturn false;\n}\n\n\nexport default Draggable;\n"],
  "mappings": "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",
  "names": ["require_rect", "__commonJSMin", "exports", "module", "Rect", "l", "t", "r", "b", "require_has_scroll", "__commonJSMin", "exports", "require_scrollbar", "__commonJSMin", "exports", "module", "scrollDiv", "style", "require_is_fixed", "__commonJSMin", "exports", "module", "el", "parentEl", "require_fake_element", "__commonJSMin", "exports", "module", "require_prefix", "__commonJSMin", "exports", "module", "styles", "pre", "dom", "require_css", "__commonJSMin", "exports", "module", "fakeStyle", "prefix", "el", "obj", "name", "value", "prefixize", "uName", "require_parse_value", "__commonJSMin", "exports", "module", "str", "require_translate", "__commonJSMin", "exports", "module", "css", "parseValue", "el", "translateStr", "match", "values", "value", "require_offset", "__commonJSMin", "exports", "module", "win", "doc", "Rect", "hasScroll", "scrollbar", "isFixedEl", "getTranslate", "offsets", "el", "cRect", "result", "res", "isFixed", "xOffset", "yOffset", "require_icicle", "__commonJSMin", "exports", "module", "lock", "unlock", "isLocked", "lockCache", "target", "name", "locks", "require_listeners", "__commonJSMin", "exports", "module", "LISTENERS", "get", "target", "evt", "tags", "cbs", "result", "filteredResult", "cb", "hasTags", "remove", "evtCallbacks", "callbacks", "i", "add", "targetCallbacks", "require_off", "__commonJSMin", "exports", "module", "off", "icicle", "listeners", "target", "evt", "fn", "callbacks", "i", "args", "allOff", "evtParts", "obj", "evtName", "cb", "offMethod", "require_on", "__commonJSMin", "exports", "module", "icicle", "listeners", "off", "on", "target", "evt", "cb", "o", "selector", "delegate", "onMethod", "evtParts", "container", "srcEl", "delegateTarget", "require_emit", "__commonJSMin", "exports", "module", "icicle", "listeners", "target", "evt", "a", "b", "args", "emit", "$", "doc", "win", "eventName", "data", "bubbles", "emitMethod", "evtParts", "evtCallbacks", "fireList", "i", "require_emmy", "__commonJSMin", "exports", "module", "require_get_client_xy", "__commonJSMin", "exports", "module", "getClientY", "idx", "findTouch", "getClientX", "getClientXY", "touchList", "require_is_primitive", "__commonJSMin", "exports", "module", "val", "require_st8", "__commonJSMin", "exports", "module", "isPrimitive", "State", "states", "context", "value", "prevValue", "ENTER", "EXIT", "OTHERWISE", "oldStateName", "oldState", "leaveResult", "leaveFlag", "newStateName", "newState", "enterResult", "enterFlag", "require_define_state", "__commonJSMin", "exports", "module", "defineState", "State", "target", "property", "descriptor", "isFn", "state", "value", "import_offset", "import_emmy", "import_get_client_xy", "import_define_state", "win", "doc", "root", "touches", "Draggable", "_Draggable", "target", "options", "instance", "defineState", "q", "rect", "offsets", "dropTarget", "targetRect", "intersect", "eventName", "callback", "e", "now", "elapsed", "dX", "dY", "delta", "v", "isZeroArray", "clientX", "getClientX", "clientY", "getClientY", "difX", "difY", "selection", "handle", "mouseX", "mouseY", "diffMouseX", "diffMouseY", "mouseAbsX", "mouseAbsY", "x", "y", "isFixed", "cancelEls", "draggy", "cancelEl", "thisClientRect", "pinX", "pinY", "initXY", "curOffsets", "within", "withinOffsets", "getTranslate", "round", "value", "pin", "val", "limits", "w", "oX", "loop", "clamp", "oY", "arr", "str", "prev", "curr", "rect1", "rect2", "tolerance", "overlapX", "overlapY", "overlapArea", "rect1Area", "rect2Area", "smallerArea", "left", "right", "tmp", "frame", "min", "max", "step", "precision", "n", "s", "d", "el", "translateStr", "match", "values", "parentEl", "draggy_default"]
}
